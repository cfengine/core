#######################################################
#
# Conflation of multi-index entries in arrays
# Redmine#6674: Conflation of multi-index entries in arrays
#
#######################################################

body common control
{
     # inputs => { "../../default.cf.sub" };
      bundlesequence  => { default("$(this.promise_filename)") };
      version => "1.0";
}

#######################################################

bundle agent init
{
  vars:
      "dummy" string => "dummy";
}

#######################################################

bundle agent test
{
  vars:
    "file[22][0]" string => "something";
}

bundle agent gvar ( name, value )
{
  vars:
      "${name}" string => "${value}";
}
#######################################################

bundle agent check
{
  classes:
      "failure" expression => strcmp("${file[2][20]}", "${file[22][0]}");

  reports:
    failure::
      "$(this.promise_filename) FAIL";
    !failure::
      "$(this.promise_filename) Pass";

}

