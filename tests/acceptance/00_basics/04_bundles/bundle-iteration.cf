body common control
{
      inputs => { "../../default.cf.sub" };
      bundlesequence => { default("$(this.promise_filename)") };
      version => "1.0";
}

bundle agent test
{
  vars:
      "bundles" slist => { "a", "b" };
      "values" slist => { "x", "y" };

  methods:
      "b" usebundle => $(bundles)("z"); # runs 2x
      "bv" usebundle => $(bundles)($(values)); # runs 4x
}

bundle agent a(var)
{
  classes:
      "a_$(var)" expression => "any", scope => "namespace";
}

bundle agent b(var)
{
  classes:
      "b_$(var)" expression => "any", scope => "namespace";
}

bundle agent check
{
  methods:
      "" usebundle => dcs_passif_expected("a_x,b_x,a_y,b_y,a_z,b_z", # expected
                                          "", # not expected
                                          $(this.promise_filename)),
      inherit => "true";
}
