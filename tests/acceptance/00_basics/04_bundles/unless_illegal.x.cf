body common control
{
    inputs => { "../../default.cf.sub" };
    bundlesequence => { default($(this.promise_filename)) };
}

bundle agent test
{
  meta:
    any::
      "description" -> { "CFE-2698" }
        string => "This test ensures that unresolved function calls in unless are illegal";

  vars:
    any::
      "vars_promise_which_should_error"
        string => "variable",
        unless => isvariable( $(no_such_variable) );
}

bundle agent check
{
    reports:
      any::
        "$(this.promise_filename) Pass"; # Should never get here
}
