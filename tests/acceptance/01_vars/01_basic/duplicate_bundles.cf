body common control
{
  inputs => { "../../default.cf.sub" };
  bundlesequence  => { default("$(this.promise_filename)") };
  version => "1.0";
}

bundle agent init
{
   reports: 
      never::
         "not used";
}

bundle agent test
{
   methods:
      "one" usebundle => gvar( "x", "one" );
      !FAIL::
         "two" usebundle => gvar( "y", "two" );
}

bundle agent gvar ( name, value )
{
   vars:
      "${name}" string => "${value}";
}

bundle agent check
{
   classes:
      "pass_x" expression => strcmp( "one", "${gvar.x}" );
      "pass_y" expression => strcmp( "two", "${gvar.y}" );
      "PASS" expression => "pass_x.pass_y";
      
   reports:
      debug::
         "gvar.x => ${gvar.x}";
         "gvar.y => ${gvar.y}";
      PASS::
        "$(this.promise_filename) Pass";
      !PASS::
        "$(this.promise_filename) Fail";
}
