#######################################################
#
# Test illegal codes (string) with command and *_returncodes (issue 751)
#
#######################################################

body common control
{
      inputs => { "../../default.cf.sub" };
      bundlesequence  => { default("$(this.promise_filename)") };
      version => "1.0";
}

# These set/clear global classes, so they can be tested in another bundle
body classes all_classes
{
      promise_kept => { "promise_kept" };
      promise_repaired => { "promise_repaired" };
      repair_failed => { "repair_failed" };
      repair_denied => { "repair_denied" };
      repair_timeout => { "repair_timeout" };
      cancel_kept => { "cancel_kept" };
      cancel_repaired => { "cancel_repaired" };
      cancel_notkept => { "cancel_notkept" };
      kept_returncodes => { "1", "3" };
      repaired_returncodes => { "fred", "7" };        # Must be an integer
      failed_returncodes => { "1", "2" };
}

bundle agent check
{
  methods:
      "" usebundle => dcs_pass($(this.promise_filename));
}
