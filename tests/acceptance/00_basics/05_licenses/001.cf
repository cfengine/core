#######################################################
#
# Test that we do not complain about license.
#
#######################################################

body common control
{
      inputs => { "../../default.cf.sub" };
      bundlesequence  => { default("$(this.promise_filename)") };
      version => "1.0";
}

#######################################################

bundle agent test
{
  methods:
      "" usebundle => dcs_passif_output(".*", # wanted
                                        ".*Your configuration promises no host_licenses_paid in common control.*", # unwanted
                                        "$(sys.cf_agent) -Kvf $(this.promise_filename).sub -D AUTO 2>&1| grep host_licenses_paid",
                                        $(this.promise_filename)),
      inherit => "true";

  reports:
    EXTRA::
      "This should only pass if $(this.promise_filename).sub does not output anything about license";
}
